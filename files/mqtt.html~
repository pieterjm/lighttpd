<script src="mqttws31.js"></script>
<script>
console.log("start");

client = new Messaging.Client("192.168.1.43",80, "clientId");
client.onConnectionLost = onConnectionLost;
client.onMessageArrived = onMessageArrived;
client.connect({onSuccess:onConnect});

function onConnect() {
  // Once a connection has been made, make a subscription and send a message.
    console.log("onConnect");
      client.subscribe("/World");
        message = new Messaging.Message("Hello");
          message.destinationName = "/World";
            client.send(message); 
            };
            function onConnectionLost(responseObject) {
              if (responseObject.errorCode !== 0)
                  console.log("onConnectionLost:"+responseObject.errorMessage);
                  };
                  function onMessageArrived(message) {
                    console.log("onMessageArrived:"+message.payloadString);
                      client.disconnect(); 
                      };	
</script>
